{% load static %}
<!DOCTYPE html>
<html>
  <head>  
    <meta charset="utf-8">
    <title>Digit Storage System - Digidex</title>
    <meta content="A platform for gardeners to cultivate their curiosity." name="description">
    <meta content="Digit Storage System - Digidex" property="og:title">
    <meta content="A platform for gardeners to cultivate their curiosity." property="og:description">
    <meta content="Digit Storage System - Digidex" property="twitter:title">
    <meta content="A platform for gardeners to cultivate their curiosity." property="twitter:description">
    <meta property="og:type" content="website">
    <meta content="summary_large_image" name="twitter:card">
    <meta content="width=device-width, initial-scale=1" name="viewport">

    <link href="{% static 'base/css/normalize.css' %}" rel="stylesheet" type="text/css">
    <link href="{% static 'base/css/base-styles.css' %}" rel="stylesheet" type="text/css">
    <link href="{% static 'digidex/css/digidex-styles.css' %}" rel="stylesheet" type="text/css">
    <link href="{% static 'inventory/css/inventory-styles.css' %}" rel="stylesheet" type="text/css">
    
    <link href="https://fonts.googleapis.com" rel="preconnect">
    <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin="anonymous">
    
    <!-- Load Fonts -->
    <script src="https://ajax.googleapis.com/ajax/libs/webfont/1.6.26/webfont.js" type="text/javascript"></script>
    <script type="text/javascript">
      WebFont.load({
        google: {
          families: ["Space Grotesk:regular,500,600,700", "IBM Plex Mono:regular,italic,500,500italic,600,600italic,700,700italic"]
        }
      });
    </script>
    
    <link href="{% static 'digidex/images/favicon.png' %}" rel="shortcut icon" type="image/x-icon">
    <link href="{% static 'digidex/images/webclip.png' %}" rel="apple-touch-icon">
  </head>
  <body>
    {% include 'navigation-bar.html' %}
    <div class="collection-list-wrapper-messages base-dyn-list">
      {% if messages %}
      <div role="list" class="base-dyn-items">
        {% for message in messages %}
          <div role="listitem" class="base-dyn-item">
            <div class="{% if message.tags %}{{ message.tags }}-message{% endif %}">
              <span class="text-{% if message.tags %}{{ message.tags }}{% endif %}">{{ message }}</span>
            </div>
          </div>
        {% endfor %}
      </div>  
       {% endif %}  
    </div>
 
    <section class="section">
      <div class="content content-profile">
        <div class="block-profile">
          <div class="subtitle green">Profile<br></div>
          <h2 class="profile-heading">{{ profile.user.username }}</h2>
        </div>
        <div class="layout-grid grid-profile">
          <div class="profile-avatar"> 
            <div class="date">{{ profile.created_at|date:"M. d, Y" }}</div>
            {% if profile.avatar %}
              <img src="{{ profile.avatar.url }}" alt="User avatar" class="avatar-image">
            {% else %}
              <img src="{% static 'digidex/images/placeholder.svg' %}" alt="No Image Available" class="avatar-image">
            {% endif %}
            <div class="profile-text">Edit Profile<a href="{% url 'accounts:profile-modification' profile.user.username_slug %}" class="profile-link"></a></div>
          </div>
          <div class="profile-bio">
            <div class="tab-headings">
              <div class="tab-heading active" data-tab-target="#bio">
                <img src="{% static 'inventory/images/bio.svg' %}" alt="Bio Icon" class="icon-bio"><span class="bio-text">Bio</span>
              </div>
              <div class="tab-heading" data-tab-target="#plants">
                <img src="{% static 'inventory/images/plant.svg' %}" alt="Plant Icon" class="icon-bio"><span class="plant-text">Plants</span>
              </div>
              <div class="tab-heading" data-tab-target="#pets">
                <img src="{% static 'inventory/images/animal.svg' %}" alt="Pet Icon" class="icon-bio"><span class="pet-text">Pets</span>
              </div>
            </div>                       

            <!-- Tab Content -->
            <div id="bio" class="tab-content active">
              <p>Last Login: {{ profile.created_at|date:"M. d, Y" }}</p>
            </div>
            <div id="plants" class="tab-content">
              <p>Count of Plant Digits: {{ digits_count }}</p>
            </div>
            <div id="pets" class="tab-content">
              <p>Count of Pet Digits: {{ digits_count }}</p>
            </div>
          </div>
        </div>
      </div>
    </section>
    
    <section class="section">
      <div class="content">
        <div class="collection-list-wrapper-posts base-dyn-list">
          <div role="list" class="collection-list-posts base-dyn-items">
            {% for digit in digits %}
              <div role="listitem" class="base-dyn-item">
                <div class="block-post">
                  <a href="{% url 'inventory:digit-details' digit.uuid %}" class="link-post-thumbnail base-inline-block">
                    {% if digit.journal_collection.thumbnail %}
                      <img src="{{ digit.journal_collection.thumbnail.image.url }}" alt="Journal Entry Image" loading="eager" class="image-post-thumbnail">
                    {% else %}
                      <img src="{% static 'digidex/images/placeholder.svg' %}" alt="Journal Entry Image Placeholder" loading="eager" class="image-post-thumbnail">
                    {% endif %}
                  </a>
                  <div class="post">
                    <h4 class="heading-post">{{ digit.name }}</h4>
                    <a href="{% url 'inventory:digit-details' digit.uuid %}" class="link-block base-inline-block"></a>
                  </div>
                </div>
              </div>
            {% empty %}
              <div class="empty-state base-dyn-empty">
                <div class="text-empty">No digits found.</div>
              </div>
            {% endfor %}
          </div>
        </div>
      </div>
    </section> 
    <script>
      document.addEventListener('DOMContentLoaded', function () {
        const tabs = document.querySelectorAll('.tab-heading');
        const tabContents = document.querySelectorAll('.tab-content');
      
        tabs.forEach(tab => {
          tab.addEventListener('click', function() {
            const target = document.querySelector(tab.dataset.tabTarget);
            const activeColor = window.getComputedStyle(tab).backgroundColor;
      
            // Remove active class from all tabs and contents
            tabs.forEach(t => {
              t.classList.remove('active');
            });
            tabContents.forEach(c => {
              c.classList.remove('active');
              c.style.backgroundColor = ""; // Reset background color
            });
      
            // Add active class to clicked tab and its content
            tab.classList.add('active');
            target.classList.add('active');
            target.style.backgroundColor = activeColor; // Apply active tab's background color to content
          });
        });
      });
    </script>          
  </body>
</html>