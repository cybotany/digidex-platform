{% load wagtailimages_tags wagtailcore_tags %}

<div class="layout-grid grid-solutions">
  {% for card in self.cards %}
    <div class="solutions">
      {% if card.value.tag %}
        {% with tag=card.value.tag %}
          {% if tag.color %}
            <div class="{{ tag.color }}-tag">{{ tag.text }}<br></div>
          {% endif %}
        {% endwith %}
      {% endif %}
    
      {% if card.value.content %}
        {% with content=card.value.content %}
          {% if content.image %}
            {% image content.image fill-300x300 as img %}
            <img src="{{ img.url }}" alt="{{ content.image.title }}" loading="eager" class="icon-solution">
          {% endif %}
          
          {% if content.heading %}
            <h5 class="heading-solution">{{ content.heading|richtext }}</h5>
          {% endif %}
          
          {% if content.paragraph %}
            <p class="paragraph-solution">{{ content.paragraph|richtext }}</p>
          {% endif %}
        {% endwith %}
      {% endif %}

      {% if card.value.button %}
        {% with button=card.value.button %}
          <a href="{% if button.page %}{{ button.page.url }}{% else %}# {% endif %}" class="link-block w-inline-block" target="{{ button.target }}">
            {% if button.icon %}
              {% image button.icon fill-32x32 as icon_img %}
              <div class="block-icon-link"><img src="{{ icon_img.url }}" alt="{{ button.icon.title }}" loading="eager" class="icon-link"></div>
            {% endif %}
            <div class="text-link">{{ button.text }}</div>
          </a>
        {% endwith %}
      {% endif %}
    </div>
  {% endfor %}
</div>
