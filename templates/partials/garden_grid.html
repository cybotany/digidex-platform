{% load static %}
<section class="section">
  <div class="content">
    <div class="w-layout-grid grid-features">
      {% for group in groups %}
        <a href="{% url 'core:grouped-digits' group.id %}" class="group-card group-card-link">
          <div class="group-card-img-wrapper">
            <!-- Placeholder for group image or icon -->
          </div>
          <div class="group-card-body">
            <h5 class="group-card-header">{{ group.name }}</h5>
          </div>
        </a>
      {% endfor %}
    </div>
  </div>
</section>

<section class="section">
  <div class="content">
    <div class="account-form">
      <!-- Clickable header for toggling the form -->
      <div class="accordion-header" onclick="toggleGroupForm()">
        <h4 class="heading-account">Group plants for easier management</h4>
        <div class="block-icon-accordion" id="toggleIcon">
          <div style="-webkit-transform:translate3d(0, 0, 0) scale3d(1, 1, 1) rotateX(0) rotateY(0) rotateZ(45deg) skew(0, 0);-moz-transform:translate3d(0, 0, 0) scale3d(1, 1, 1) rotateX(0) rotateY(0) rotateZ(45deg) skew(0, 0);-ms-transform:translate3d(0, 0, 0) scale3d(1, 1, 1) rotateX(0) rotateY(0) rotateZ(45deg) skew(0, 0);transform:translate3d(0, 0, 0) scale3d(1, 1, 1) rotateX(0) rotateY(0) rotateZ(45deg) skew(0, 0);background-color:rgba(57,89,255,0.07);border-color:rgba(255,255,255,0.2)" class="block-icon-accordion"><img src="{% static 'images/close.svg' %}" loading="eager" alt="" class="icon-accordion"></div>
        </div>
      </div>
      <!-- Form, initially hidden -->
      <div id="groupForm" style="display:none" class="form-block w-form">
        <form method="post" enctype="multipart/form-data" class="form">
          {% csrf_token %}
          <!-- Form fields -->
          {% for field in form %}
            <div>
              <input type="{{ field.field.widget.input_type }}" class="text-field w-input" name="{{ field.name }}" placeholder="{{ field.label }}" id="{{ field.id_for_label }}" {% if field.is_required %}required=""{% endif %}>
              {% if field.errors %}
                <div class="error-message">
                  <small>{{ field.errors|striptags }}</small>
                </div>
              {% endif %}
            </div>
          {% endfor %}
          <input type="submit" value="Create Group" data-wait="Please wait..." class="submit-button w-button">
        </form>
      </div>
    </div>
  </div>
</section>

<section class="section">
  <div class="content">
    <div class="w-layout-grid grid-features">
      {% for digit in ungrouped_digits %}
        <a href="{% url 'core:digit' digit.id %}" class="digit-card digit-card-link">
          <div class="digit-card-img-wrapper">
            <!-- Placeholder for image or a no-image icon -->
          </div>
          <div class="digit-card-body">
            <h5 class="digit-card-header">{{ digit.name }}</h5>
            <p class="digit-card-footer">{{ digit.description }}</p>
          </div>
        </a>
      {% endfor %}
    </div>
  </div>
</section> 